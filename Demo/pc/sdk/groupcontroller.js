'use strict';import{PeerConnectionClient}from'./client';import _0x363ad7 from'./proto/control.js';var CODE_NUMBER={'CodeLButtonDown':0x65,'CodeLButtonUp':0x66,'CodeMouseMove':0x67,'CodeLButtonDBClick':0x68,'CodeRButtonDown':0x69,'CodeRButtonUp':0x6a,'CodeKeyDown':0x6b,'CodeKeyUp':0x6c,'CodeChar':0x6d,'CodeMButtonDown':0xd2,'CodeMButtonUp':0xd3,'CodeMouseWheel':0x70,'CodeDefinition':0x74,'CodeFingerDown':0x75,'CodeFingerUp':0x76,'CodeFingerMove':0x73,'CodeFingersDown':0x71,'CodeFingersUp':0x72,'CodeClipBoard':0x84,'CodeStartGame':0x85,'CodeWeixinPay':0xc8,'CodeStartAppCmd':0xd2,'CodeConnDisplaced':0x88};class AppController{constructor(_0x374f30){this['pcClient_']=null;this['offsetX']='';this['offsetY']='';this['upsetX']='';this['upsetY']='';this['moveX']='';this['moveY']='';this['deltaY']='';this['keyCode']=0x46413^0x46413;this['touches']=[];this['fingers']=![];this['keyCodearr']=[];this['fingervalue']={};this['setDefinite']='';this['videoWidth']='';this['videoHeight']='';this['messagedata']={};this['stream']=null;this['count']=0xabbe6^0xabbe6;this['timer']=null;this['ice']='disconnected';this['restartinterval']=0x8a614^0x8a7e0;this['restartcount']=0x5e231^0x5e231;this['currentRoundTripTime']={'currentRoundTripTime':''};this['framesPerSecond']={'framesPerSecond':''};this['answercode']={'answercode':'1'};this['iceconnectionstate']={'iceconnectionstate':'1'};this['gamestatus']={'gamestatus':'2'};this['resolution']={'status':'1','data':{}};this['remoteVideo_']=document['querySelector']('#remote-video');this['timestamp']=0xbaa98^0xbaa98;this['recorder']=null;this['statstimer']=null;this['restarttimer']=null;this['stopped']=![];this['channelopened']=![];this['beforeopenkind']=0x70f63^0x70f63;this['updatekind']=0x4bf1e^0x4bf1e;this['hassended']=![];this['maincontrol']=![];this['startTime']=null;this['sysInfo']=this['getExplore']();this['loadingParams_']={..._0x374f30,'peerConnectionConfig':{'iceServers':[{'urls':'turn:turn.ugame.ucloud.cn:3478','username':'ucloud','credential':'ucloud.123cn'}]},'debug':!![]};var _0x22a667=Promise['resolve']({});Promise['resolve'](_0x22a667)['then'](function(_0x24f2b5){if(_0x24f2b5){Object['keys'](_0x24f2b5)['forEach'](function(_0x14b978){this['loadingParams_'][_0x14b978]=_0x24f2b5[_0x14b978];}['bind'](this));}}['bind'](this))['catch'](function(_0x4a5c8a){this['trace_']('Error\x20initializing:\x20'+_0x4a5c8a['message']);}['bind'](this));}['getExplore'](){var _0x4b4bf1={};var _0x336e8a=navigator['userAgent']['toLowerCase']();var _0xa11023;(_0xa11023=_0x336e8a['match'](/rv:([\d.]+)\) like gecko/))?_0x4b4bf1['ie']=_0xa11023[0xdea06^0xdea07]:(_0xa11023=_0x336e8a['match'](/msie ([\d\.]+)/))?_0x4b4bf1['ie']=_0xa11023[0x5f8fe^0x5f8ff]:(_0xa11023=_0x336e8a['match'](/edge\/([\d\.]+)/))?_0x4b4bf1['edge']=_0xa11023[0x37c50^0x37c51]:(_0xa11023=_0x336e8a['match'](/firefox\/([\d\.]+)/))?_0x4b4bf1['firefox']=_0xa11023[0x1]:(_0xa11023=_0x336e8a['match'](/(?:opera|opr).([\d\.]+)/))?_0x4b4bf1['opera']=_0xa11023[0x1]:(_0xa11023=_0x336e8a['match'](/chrome\/([\d\.]+)/))?_0x4b4bf1['chrome']=_0xa11023[0x1]:(_0xa11023=_0x336e8a['match'](/version\/([\d\.]+).*safari/))?_0x4b4bf1['safari']=_0xa11023[0x2ccbe^0x2ccbf]:0x0;if(_0x4b4bf1['ie'])return'IE:\x20'+_0x4b4bf1['ie'];if(_0x4b4bf1['edge'])return'EDGE:\x20'+_0x4b4bf1['edge'];if(_0x4b4bf1['firefox'])return'Firefox:\x20'+_0x4b4bf1['firefox'];if(_0x4b4bf1['chrome'])return'Chrome:\x20'+_0x4b4bf1['chrome'];if(_0x4b4bf1['opera'])return'Opera:\x20'+_0x4b4bf1['opera'];if(_0x4b4bf1['safari'])return'Safari:\x20'+_0x4b4bf1['safari'];return'Unkonwn';}['startConnection'](){if(this['loadingParams_']['Id']){this['trace_']('start\x20to\x20connect:\x20'+this['loadingParams_']['Id']);this['startSignaling_']();this['timestamp']=Date['now']();}}['reStart'](){if(this['stopped']){this['trace_']('rtc\x20stopped,I\x20don\x27t\x20want\x20to\x20restart.');return;}if(this['restarttimer']){clearTimeout(this['restarttimer']);this['restarttimer']=null;this['trace_']('clear\x20restart\x20timer,\x20ready\x20to\x20restart.');}this['closeConnection']();this['trace_']('===restart===,\x20wait\x20time(ms):\x20'+this['restartinterval']);this['restarttimer']=setTimeout(()=>{this['startConnection']();},this['restartinterval']);if(this['restartcount']<0x3){this['restartcount']+=0x1;}else{this['restartinterval']=0x90f60^0x904d8;}}['getLastTimestamp'](){return this['timestamp'];}['createPcClient_'](){this['pcClient_']=new PeerConnectionClient(this['loadingParams_'],this['startTime']);this['pcClient_']['onremotestreamadded']=this['onRemoteStreamAdded_']['bind'](this);this['pcClient_']['onerror']=this['trace_']['bind'](this);this['pcClient_']['onchangedefinit']=this['onchangedefinit_']['bind'](this);this['pcClient_']['onchangestatus']=this['onchangestatus']['bind'](this);this['pcClient_']['onchangeicestatus']=this['onchangeicestatus']['bind'](this);this['pcClient_']['onresolutionstatus']=this['onresolutionstatus']['bind'](this);this['pcClient_']['onmessagehandle']=this['onmessagehandle']['bind'](this);this['pcClient_']['onchannelstatus']=this['onchannelstatus']['bind'](this);this['getpeerstates']();}['onchangestatus'](_0xfc5125){this['answercode']['answercode']=_0xfc5125;}['onchangeicestatus'](_0x85510a){this['trace_'](this['loadingParams_']['Id']+'\x20'+'ice\x20state:\x20'+_0x85510a);this['iceconnectionstate']['iceconnectionstate']=_0x85510a;this['ice']=_0x85510a;}['onresolutionstatus'](_0x46444f){let _0xdb6842={'status':_0x46444f['status']||'','data':_0x46444f['data']||''};var _0x571cb9=_0x46444f['data']['height']||'';var _0xcb696=_0x46444f['data']['width']||'';if(_0x571cb9==0x870&&_0xcb696==0x438){_0xdb6842['id']=0x3553d^0x3553b;}if(_0x571cb9==(0xc5ca5^0xc589d)&&_0xcb696==0x780){_0xdb6842['id']=0x6f022^0x6f027;}if(_0x571cb9==(0xc1bf2^0xc1e52)&&_0xcb696==(0x5f65a^0x5f48a)){_0xdb6842['id']=0xe4598^0xe459b;}if(_0x571cb9==(0xba9c4^0xbab14)&&_0xcb696==0x500){_0xdb6842['id']=0x2;}if(_0x571cb9==(0x9a4ea^0x9a6f6)&&_0xcb696==0x3c0){_0xdb6842['id']=0x1;}if(_0x571cb9==(0xc6238^0xc61f8)&&_0xcb696==(0x9474c^0x946ac)){_0xdb6842['id']=0x42257^0x42257;}this['resolution']['id']=_0xdb6842['id'];this['resolution']['status']=_0xdb6842['status'];this['resolution']['data']=_0xdb6842['data'];}['maybeCreatePcClientAsync_'](){return new Promise(function(_0x3271dc,_0x4af564){if(this['pcClient_']){_0x3271dc();return;}this['createPcClient_']();_0x3271dc();}['bind'](this));}['startSignaling_'](){this['trace_']('Starting\x20signaling.');this['startTime']=window['performance']['now']();this['maybeCreatePcClientAsync_']()['then'](function(){this['pcClient_']['startCreateDataChannel']();this['pcClient_']['startAsCaller'](this['loadingParams_']['offerOptions']);}['bind'](this))['catch'](function(_0x8f15f9){this['trace_']('Create\x20PeerConnection\x20exception:\x20'+_0x8f15f9['message']);}['bind'](this));}['startgamestatus'](_0x2e28e4){this['trace_'](_0x2e28e4);if(_0x2e28e4['error']==0x0){this['gamestatus']['gamestatus']='success';}else{this['gamestatus']['gamestatus']='fail';}}['forceconnent'](){this['pcClient_']['forceconnection']()['then'](_0x34dcb8=>{if(_0x34dcb8==0x88){}});}['onstatus'](_0x1ed700,_0x32be96){if(_0x1ed700=='devicestatus'&&this['answercode']['answercode']){var _0x5a6983=this['answercode']['answercode'];Object['defineProperty'](this['answercode'],'answercode',{'set':function(_0x59e85e){var _0x52bbc6=_0x59e85e;if(_0x5a6983!=_0x52bbc6){_0x32be96(_0x52bbc6);_0x5a6983=_0x52bbc6;}else{_0x32be96(_0x52bbc6);}}});}else if(_0x1ed700=='networkstatus'&&this['iceconnectionstate']['iceconnectionstate']){var _0x24c500=this['iceconnectionstate']['iceconnectionstate'];Object['defineProperty'](this['iceconnectionstate'],'iceconnectionstate',{'set':function(_0x5919f7){var _0x15e23d=_0x5919f7;if(_0x24c500!=_0x15e23d){_0x32be96(_0x15e23d);_0x24c500=_0x15e23d;}else{_0x32be96(_0x15e23d);}}});}else if(_0x1ed700=='resolution'&&this['resolution']['status']){var _0x196234=this['resolution']['status'];Object['defineProperty'](this['resolution'],'status',{'set':function(_0x3359e4){var _0x4404ff=_0x3359e4;if(_0x196234!=_0x4404ff){_0x32be96(_0x4404ff);_0x196234=_0x4404ff;}else{_0x32be96(_0x4404ff);}}});}else if(_0x1ed700=='gamestatus'&&this['gamestatus']['gamestatus']){var _0x196234=this['gamestatus']['gamestatus'];Object['defineProperty'](this['gamestatus'],'gamestatus',{'set':function(_0x26cc24){var _0x4a6336=_0x26cc24;if(_0x196234!=_0x4a6336){_0x32be96(_0x4a6336);_0x196234=_0x4a6336;}else{_0x32be96(_0x4a6336);}}});}else{setTimeout(()=>{this['onstatus'](_0x1ed700,_0x32be96);},0x0);}}['setmaincontrol'](_0x2bdf87){this['maincontrol']=_0x2bdf87;}['onchannelstatus'](_0x4cbc9b){if(_0x4cbc9b=='open'){this['channelopened']=!![];if(!this['hassended']){if(this['doUpdateWork'](this['updatekind'])){this['trace_'](this['loadingParams_']['Id']+'\x20onchannelstatus\x20send\x20start\x20update\x20kind:\x20'+this['updatekind']);}this['hassended']=!![];this['beforeopenkind']=0x709ff^0x709ff;}}else{this['channelopened']=![];}this['trace_']('channel\x20state:\x20'+_0x4cbc9b+'\x20'+this['channelopened']);}['sendupdatenotice'](_0x492626){this['updatekind']=_0x492626;if(this['channelopened']){this['doUpdateWork'](this['updatekind']);this['trace_']('sendupdatenotice\x20send\x20start\x20update.');this['hassended']=!![];}else{if(this['beforeopenkind']==0x1){if(_0x492626==(0x525aa^0x525a9)){this['updatekind']=0xe9820^0xe9821;this['trace_'](this['loadingParams_']['Id']+'\x20update\x20kind\x20change\x20to\x20'+this['updatekind']);}}this['beforeopenkind']=_0x492626;}}['doUpdateWork'](_0x212d87){if(this['maincontrol']){return 0x0;}if(_0x212d87==(0xc20a1^0xc20a0)){this['onStartUpdate']();}else if(_0x212d87==(0x8aff7^0x8aff5)){this['onStopUpdate']();}else{this['trace_']('nothing\x20to\x20do.');}return 0x2de9f^0x2de9e;}['onmessagehandle'](_0x58b385){console['log'](_0x58b385);this['trace_'](_0x58b385);var _0x26b407=JSON['parse'](_0x58b385);var _0x37de9d=_0x26b407['code'];var _0x46800a=_0x26b407['data'];switch(_0x37de9d){case CODE_NUMBER['CodeWeixinPay']:var _0x501e00=_0x46800a['type'];var _0x1e7b8c=_0x46800a['uri'];this['trace_'](_0x501e00+'\x20'+_0x1e7b8c);this['sendPayRequest_'](_0x1e7b8c);break;case CODE_NUMBER['CodeConnDisplaced']:this['answercode']['answercode']=_0x37de9d;break;default:break;}}['openPayWindow'](_0x25da21,_0x257f9b){let _0x4841e2=document['createElement']('a');_0x4841e2['setAttribute']('href',_0x25da21);_0x4841e2['setAttribute']('target','_blank');_0x4841e2['setAttribute']('id',_0x257f9b);_0x4841e2['setAttribute']('rel','https://www.wdyxgames.com');if(!document['getElementById'](_0x257f9b)){document['body']['appendChild'](_0x4841e2);}_0x4841e2['click']();}['sendPayRequest_'](_0x4e0229){this['trace_']('sendPayRequest\x20called.');var _0x11b893=decodeURIComponent(_0x4e0229);this['trace_']('payUrl:\x20'+_0x11b893);var _0x3cbbd1=_0x11b893['indexOf']('?');if(_0x3cbbd1!==-0x1){var _0x4301d1=_0x11b893['substring'](_0x3cbbd1+0x1);var _0x10015c=_0x4301d1['split']('&');if(_0x10015c['length']===0x4){const _0x3f589c={'appId':'wx77d53b84434b9d9a','timeStamp':Date['parse'](new Date())/0x3e8,'nonceStr':this['getKeyValue_'](_0x10015c[0x2]),'package':_0x10015c[0xb6e20^0xb6e20],'signType':'MD5','paySign':this['getKeyValue_'](_0x10015c[0x3])};this['trace_']('payParam:\x20'+JSON['stringify'](_0x3f589c));}}}['getKeyValue_'](_0x487c2e){var _0x1935bf=_0x487c2e['indexOf']('=');if(_0x1935bf!==-0x1){return _0x487c2e['substring'](_0x1935bf+0x1);}return'';}['onchangedefinit_'](_0x37119b={}){this['messagedata']=_0x37119b;this['trace_'](this['messagedata']);}['Hangup'](){this['stream']=null;this['loadingParams_']['Id']='';this['stopped']=!![];this['trace_']('Hangup\x20called.');if(this['statstimer']!=null){clearInterval(this['statstimer']);this['statstimer']=null;this['trace_']('close\x20stats\x20timer\x20interval.');}if(this['restarttimer']!=null){clearTimeout(this['restarttimer']);this['restarttimer']=null;this['trace_']('close\x20restart\x20timer.');}if(this['pcClient_']){this['pcClient_']['close']();this['pcClient_']=null;}}['closeConnection'](){this['stream']=null;this['trace_']('closeConnection\x20called.');if(this['statstimer']!=null){clearInterval(this['statstimer']);this['statstimer']=null;this['trace_']('close\x20stats\x20timer\x20interval.');}if(this['restarttimer']!=null){clearTimeout(this['restarttimer']);this['restarttimer']=null;this['trace_']('close\x20restart\x20timer.');}if(this['pcClient_']){this['pcClient_']['close']();this['pcClient_']=null;}}['onRemoteStreamAdded_'](_0x41a3d9){let _0xeea4eb=this;this['stream']=_0x41a3d9;this['restartinterval']=0x7a7cc^0x7a638;this['restartcount']=0x7e46b^0x7e46b;this['trace_']('Remote\x20stream\x20added.');if(this['remoteVideo_']){this['remoteVideo_']['onloadeddata']=function _0x310ee2(){_0xeea4eb['videoWidth']=this['videoWidth'];_0xeea4eb['videoHeight']=this['videoHeight'];};this['remoteVideo_']['onresize']=function _0x25f982(){};}}['getremotestream'](){return this['stream'];}['getpeerstates'](){var _0x1372c8=this;if(this['pcClient_']){this['statstimer']=setInterval(()=>{if(this['pcClient_']!=null){this['pcClient_']['getPeerConnectionStats'](this['getstats']['bind'](_0x1372c8));}},0xafb91^0xaf879);}}['getstats'](_0x5a6ca5){_0x5a6ca5['forEach'](_0x49f94c=>{if(_0x49f94c['type']=='candidate-pair'&&_0x49f94c['currentRoundTripTime']){this['currentRoundTripTime']['currentRoundTripTime']=_0x49f94c['currentRoundTripTime'];}if(_0x49f94c['type']=='inbound-rtp'&&_0x49f94c['framesPerSecond']){this['framesPerSecond']['framesPerSecond']=_0x49f94c['framesPerSecond'];}});}['getNetDelay'](_0x47f127){if(this['currentRoundTripTime']['currentRoundTripTime']){_0x47f127(this['currentRoundTripTime']['currentRoundTripTime']);var _0x2047c5=this['currentRoundTripTime']['currentRoundTripTime'];Object['defineProperty'](this['currentRoundTripTime'],'currentRoundTripTime',{'set':function(_0x1253ba){var _0x39522a=_0x1253ba;if(_0x2047c5!=_0x39522a){_0x47f127(_0x39522a);_0x2047c5=_0x39522a;}}});}else{setTimeout(()=>{this['getNetDelay'](_0x47f127);},0x9e744^0x9e4ac);}}['getcurrentfps'](_0x7925ff){if(this['framesPerSecond']['framesPerSecond']){_0x7925ff(this['framesPerSecond']['framesPerSecond']);var _0x5ba931=this['framesPerSecond']['framesPerSecond'];Object['defineProperty'](this['framesPerSecond'],'framesPerSecond',{'set':function(_0x1bafc7){var _0x128922=_0x1bafc7;if(_0x5ba931!=_0x128922){_0x7925ff(_0x128922);_0x5ba931=_0x128922;}}});}else{setTimeout(()=>{this['getcurrentfps'](_0x7925ff);},0x3e8);}}['sendMessage'](_0x71dab){if(this['ice']!=='connected'){return;}this['timestamp']=Date['now']();var _0x227c60={'name':_0x71dab['name']||'','gamename':_0x71dab['gamename']||'','jobid':_0x71dab['jobid']||'','offsetWidth':_0x71dab['offsetWidth']||'','offsetHeight':_0x71dab['offsetHeight']||'','offsetX':_0x71dab['offsetX']||'','offsetY':_0x71dab['offsetY']||'','timeStamp':_0x71dab['timeStamp']||'','button':_0x71dab['button']||'','buttontype':_0x71dab['buttontype']||'','wheelDelta':_0x71dab['wheelDelta']||'','keyCode':_0x71dab['keyCode']||'','content':_0x71dab['content']||''};if(_0x227c60['name']=='mousedown'){this['onOffsetSend'](_0x227c60);}if(_0x227c60['name']=='mouseup'){this['onUpsetSend'](_0x227c60);}if(_0x227c60['name']=='mousemove'){this['onMoveSend'](_0x227c60);}if(_0x227c60['name']=='mousewheel'){this['onWheelSend'](_0x227c60);}if(_0x227c60['name']=='keydown'||_0x227c60['name']=='keyup'){this['onkeyCodeSend'](_0x227c60);}if(_0x227c60['name']=='touchstart'){this['onTouchDownSend'](_0x227c60);}if(_0x227c60['name']=='touchend'){this['onTouchUpSend'](_0x227c60);}if(_0x227c60['name']=='touchmove'){this['onTouchMoveSend'](_0x227c60);}if(_0x227c60['name']=='backhome'){this['onBackHome'](_0x227c60);}if(_0x227c60['name']=='phonemenu'){this['onPhoneMenu'](_0x227c60);}if(_0x227c60['name']=='backlast'){this['onBackLast'](_0x227c60);}if(_0x227c60['name']=='addvolume'){this['onChangeVolume'](_0x227c60);}if(_0x227c60['name']=='devolume'){this['onChangeVolume'](_0x227c60);}if(_0x227c60['name']=='clipboard'){this['onSendClipboard']();}if(_0x227c60['name']=='startgame'){this['onStartGame'](_0x227c60);}if(_0x227c60['name']=='forcetk'){this['onRestartTk'](_0x227c60);}if(_0x227c60['name']=='startupdate'){this['onStartUpdate']();}if(_0x227c60['name']=='stopupdate'){this['onStopUpdate']();}}['onSendChannelData_'](_0x234ca7){if(this['pcClient_']!==null){return this['pcClient_']['sendDataMessage'](_0x234ca7);}else{return new Promise((_0x98c1ef,_0xd57d59)=>{_0x98c1ef({'sendstatus':'failed','sendmessage':_0x234ca7});});}}['onStartUpdate'](){var _0x26aa73=_0x363ad7['lookup']('raw_msg');var _0x223f9f={'@type':'ucloud.secm','v':0x2};var _0xaed8c7={'code':0x86,'msg':_0x223f9f};var _0x12c41c=_0x26aa73['encode'](_0x26aa73['fromObject'](_0xaed8c7))['finish']();console['log'](_0x26aa73['decode'](_0x12c41c));this['onSendChannelData_'](_0x12c41c)['then'](_0x56659f=>{if(_0x56659f['sendstatus']!='success'){this['trace_']('onStartUpdate\x20send\x20failed,retry\x20one\x20time.'+JSON['stringify'](_0x56659f));this['onSendChannelData_'](_0x12c41c);}});}['onStopUpdate'](){var _0x2a5e71=_0x363ad7['lookup']('raw_msg');var _0x139dc1={'code':0x87,'msg':''};var _0x20769c=_0x2a5e71['encode'](_0x2a5e71['create'](_0x139dc1))['finish']();this['trace_'](_0x2a5e71['decode'](_0x20769c));this['onSendChannelData_'](_0x20769c)['then'](_0x2d7924=>{this['trace_']('onStopUpdate:\x20'+JSON['stringify'](_0x2d7924));});}['onStartGame'](_0x110d3d){var _0x110d3d={'code':CODE_NUMBER['CodeStartGame'],'body':{'name':_0x110d3d['gamename'],'jobid':_0x110d3d['jobid']}};this['onSendChannelData_'](JSON['stringify'](_0x110d3d))['then'](_0xeabec7=>{});}['onRestartTk'](_0x4fb0ed){var _0x4fb0ed={'code':CODE_NUMBER['CodeStartAppCmd'],'body':{'cmd':0x3e9,'content':_0x4fb0ed['content'],'requestId':this['pcClient_']['generateUUID_']()['substring'](0x0,0x43534^0x4353c)}};console['log'](_0x4fb0ed);this['onSendChannelData_'](JSON['stringify'](_0x4fb0ed))['then'](_0x3f2110=>{this['trace_'](_0x3f2110);});}['onSendClipboard'](){if(navigator['clipboard']===undefined){return;}navigator['clipboard']['readText']()['then'](_0x2c087b=>{if(_0x2c087b['length']>(0x2d535^0x2d535)){var _0xb9e0dc={'body':{'data':_0x2c087b}};console['log'](_0xb9e0dc);_0xb9e0dc['code']=CODE_NUMBER['CodeClipBoard'];this['onSendChannelData_'](JSON['stringify'](_0xb9e0dc))['then'](_0x2eff96=>{});}});}['onOffsetSend'](_0x531901){var _0x38289a=this['videoWidth']/this['remoteVideo_']['offsetWidth']*_0x531901['offsetX'];var _0x48e5da=this['videoHeight']/this['remoteVideo_']['offsetHeight']*_0x531901['offsetY'];var _0xbc9bfe={'body':{'xpos':_0x38289a,'ypos':_0x48e5da}};if(_0x531901['buttontype']==0x0){_0xbc9bfe['code']=CODE_NUMBER['CodeLButtonDown'];}else if(_0x531901['buttontype']==0x2){_0xbc9bfe['code']=CODE_NUMBER['CodeRButtonDown'];}else{_0xbc9bfe['code']=CODE_NUMBER['CodeMButtonDown'];}if(this['stream']){this['onSendChannelData_'](_0xbc9bfe)['then'](_0x3ed895=>{this['trace_'](_0x3ed895);});}this['trace_'](this['videoWidth'],this['videoHeight']);this['trace_'](this['offsetX'],this['offsetY']);}['onUpsetSend'](_0x1013b0){var _0x582bce=this['videoWidth']/this['remoteVideo_']['offsetWidth']*_0x1013b0['offsetX'];var _0x35bd9e=this['videoHeight']/this['remoteVideo_']['offsetHeight']*_0x1013b0['offsetY'];var _0x3d8a3e={'body':{'xpos':_0x582bce,'ypos':_0x35bd9e}};if(_0x1013b0['buttontype']==(0x74385^0x74385)){_0x3d8a3e['code']=CODE_NUMBER['CodeLButtonUp'];}else if(_0x1013b0['buttontype']==0x2){_0x3d8a3e['code']=CODE_NUMBER['CodeRButtonUp'];}else{_0x3d8a3e['code']=CODE_NUMBER['CodeMButtonUp'];}if(this['stream']){this['onSendChannelData_'](_0x3d8a3e)['then'](_0x22ece6=>{this['trace_'](_0x22ece6);});}}['onMoveSend'](_0x226894){var _0xafc2a2=this['videoWidth']/this['remoteVideo_']['offsetWidth']*_0x226894['offsetX'];var _0x9a786e=this['videoHeight']/this['remoteVideo_']['offsetHeight']*_0x226894['offsetY'];var _0x294fdb={'body':{'xpos':_0xafc2a2,'ypos':_0x9a786e}};_0x294fdb['code']=CODE_NUMBER['CodeMouseMove'];if(this['stream']){this['onSendChannelData_'](_0x294fdb)['then'](_0x30f5f2=>{});}}['onWheelSend'](_0x4b726e){var _0x2e7c27=_0x4b726e['wheelDelta'];var _0x3ccd0b={'body':{'zDelta':_0x2e7c27}};_0x3ccd0b['code']=CODE_NUMBER['CodeMouseWheel'];if(this['stream']){this['onSendChannelData_'](_0x3ccd0b)['then'](_0x59fc7d=>{});}}['onkeyCodeSend'](_0x57a06b){var _0x3c28d6=_0x363ad7['lookup']('raw_msg');var _0x21a191=_0x57a06b['keyCode'];var _0x1dec62={'msg':{'@type':'ucloud.kb','v':_0x21a191},'timestamp':_0x57a06b['timeStamp']*0x3e8};if(_0x57a06b['name']=='keydown'){_0x1dec62['code']=CODE_NUMBER['CodeKeyDown'];}else{_0x1dec62['code']=CODE_NUMBER['CodeKeyUp'];}var _0x40b7b4=_0x3c28d6['encode'](_0x3c28d6['fromObject'](_0x1dec62))['finish']();this['onSendChannelData_'](_0x40b7b4)['then'](_0x2d036c=>{});}['onTouchDownSend'](_0x556b4a){this['touches']['push'](_0x556b4a);var _0x2c1e9b=_0x363ad7['lookup']('finger');var _0x74a13f=_0x363ad7['lookup']('raw_msg');var _0x2b69cc={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x556b4a['timeStamp']*0x3e8};var _0x514a5a;this['touches']['forEach']((_0x380145,_0x25ea12)=>{if(this['remoteVideo_']){var _0x1178c7={'fid':Math['abs'](_0x380145['button']),'x':_0x380145['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x380145['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x1178c7={'fid':Math['abs'](_0x380145['button']),'x':_0x380145['offsetX']/_0x380145['offsetWidth'],'y':_0x380145['offsetY']/_0x380145['offsetHeight']};}_0x2b69cc['motionFs']['push'](_0x2c1e9b['create'](_0x1178c7));console['log'](_0x2b69cc);});_0x514a5a=_0x74a13f['encode'](_0x74a13f['create'](_0x2b69cc))['finish']();this['trace_'](this['loadingParams_']['Id']+'按下');this['onSendChannelData_'](_0x514a5a)['then'](_0xf47fad=>{});}['onTouchUpSend'](_0x1dd5c0){var _0x492e92='';this['touches']['forEach']((_0x4a3b63,_0x5b457b)=>{if(_0x4a3b63['button']==_0x1dd5c0['button']){_0x492e92=_0x5b457b;}});this['touches']['splice'](_0x492e92,0x1);var _0x29ffae=_0x363ad7['lookup']('finger');var _0x9624c5=_0x363ad7['lookup']('raw_msg');var _0x4cda17={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x1dd5c0['timeStamp']*(0xe9a8d^0xe9965)};var _0x3057d1;this['touches']['length']&&this['touches']['forEach']((_0x5ed22d,_0x54f08e)=>{if(this['remoteVideo_']){var _0x864365={'fid':Math['abs'](_0x5ed22d['button']),'x':_0x5ed22d['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x5ed22d['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x864365={'fid':Math['abs'](_0x5ed22d['button']),'x':_0x5ed22d['offsetX']/_0x5ed22d['offsetWidth'],'y':_0x5ed22d['offsetY']/_0x5ed22d['offsetHeight']};}_0x4cda17['motionFs']['push'](_0x29ffae['create'](_0x864365));console['log'](_0x4cda17);});_0x3057d1=_0x9624c5['encode'](_0x9624c5['create'](_0x4cda17))['finish']();this['trace_'](this['loadingParams_']['Id']+'抬起');this['onSendChannelData_'](_0x3057d1)['then'](_0x20e3e1=>{});}['onTouchMoveSend'](_0x6322de){console['log'](this['loadingParams_']['Id']+'移动');var _0x5da122=_0x363ad7['lookup']('finger');var _0x1a7bdc=_0x363ad7['lookup']('raw_msg');var _0x2efadb={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x6322de['timeStamp']*(0x1a9b9^0x1aa51)};var _0xde9078;if(this['remoteVideo_']){var _0x5a2bb1={'fid':Math['abs'](_0x6322de['button']),'x':_0x6322de['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x6322de['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x5a2bb1={'fid':Math['abs'](_0x6322de['button']),'x':_0x6322de['offsetX']/_0x6322de['offsetWidth'],'y':_0x6322de['offsetY']/_0x6322de['offsetHeight']};}_0x2efadb['motionFs']['push'](_0x5da122['create'](_0x5a2bb1));console['log'](_0x2efadb);_0xde9078=_0x1a7bdc['encode'](_0x1a7bdc['create'](_0x2efadb))['finish']();this['onSendChannelData_'](_0xde9078)['then'](_0x581a03=>{});}['onKeyDownSend'](_0x3b06f9){try{this['keyCodearr']&&this['keyCodearr']['forEach'](_0x1b249c=>{if(_0x1b249c==_0x3b06f9['keyCode']){throw new error();}});}catch(_0x4dc0da){return;}this['keyCodearr']['push'](_0x3b06f9['keyCode']);let _0x33f78e={};var _0x83b147=_0x3b06f9['x'];var _0x39ae11=_0x3b06f9['y'];let _0x500e38={'xpos':_0x83b147,'ypos':_0x39ae11,'type':'keydown','keyCode':_0x3b06f9['keyCode']};_0x500e38['finger-id']=this['touches']['length'];if(_0x3b06f9['keyCode']=='65'||_0x3b06f9['keyCode']=='87'||_0x3b06f9['keyCode']=='83'||_0x3b06f9['keyCode']=='68'){if(this['touches']['length']){try{this['touches']['forEach'](_0xc89170=>{if(_0xc89170['keyCode']!==_0x3b06f9['keyCode']){if(_0xc89170['keyCode']=='65'||_0xc89170['keyCode']=='87'||_0xc89170['keyCode']=='83'||_0xc89170['keyCode']=='68'){this['touches']['push'](_0x500e38);this['onKeyDownCorSend']();throw new error();}}});}catch{return;}}}this['touches']['push'](_0x500e38);if(this['touches']['length']>(0x616f3^0x616f2)){_0x33f78e['code']=CODE_NUMBER['CodeFingersDown'];}else{_0x33f78e['code']=CODE_NUMBER['CodeFingerDown'];}_0x33f78e['body']=_0x500e38;if(this['stream']){this['onSendChannelData_'](_0x33f78e)['then'](_0x28c373=>{});}this['onKeyMoveSend'](this['touches']);}['onKeyUpSend'](_0x187d0c){var _0x1bda89='';this['keyCodearr']&&this['keyCodearr']['forEach']((_0x17cb19,_0x416f94)=>{if(_0x17cb19==_0x187d0c['keyCode']){_0x1bda89=_0x416f94;}});this['keyCodearr']['splice'](_0x1bda89,0x1);var _0x176bbd={};var _0x255c13=this['touches'];var _0x118674=[];var _0x426a0e=_0x187d0c['x'];var _0x59fb85=_0x187d0c['y'];var _0x3a4038={'xpos':_0x426a0e,'ypos':_0x59fb85};if(_0x255c13['length']>0x1){_0x176bbd['code']=CODE_NUMBER['CodeFingersUp'];}else{_0x176bbd['code']=CODE_NUMBER['CodeFingerUp'];}if(_0x255c13['length']){_0x255c13['forEach']((_0x42e525,_0x36e1b5)=>{if(_0x42e525['xpos']==_0x3a4038['xpos']&&_0x42e525['ypos']==_0x3a4038['ypos']&&_0x42e525['type']=='keydown'){_0x3a4038=_0x42e525;_0x176bbd['body']=_0x42e525;if(this['stream']){this['onSendChannelData_'](_0x176bbd)['then'](_0x559968=>{});}}else if(_0x42e525['type']=='keycordown'){_0x3a4038=_0x42e525;_0x176bbd['body']=_0x42e525;if(this['stream']){this['onSendChannelData_'](_0x176bbd)['then'](_0x524a89=>{});this['keyCodearr']=[];}}else{_0x118674['push'](_0x42e525);}});}this['touches']=_0x118674;this['trace_'](this['touches']);if(_0x118674['length']!==0x0){this['onKeyMoveSend'](_0x118674);}}['onKeyDownCorSend'](){var _0x210132=[];var _0x144838={};var _0x27ece7={};var _0x3553a8={};this['touches']['forEach']((_0x64907d,_0x209b77)=>{if(_0x64907d['keyCode']=='65'||_0x64907d['keyCode']=='87'||_0x64907d['keyCode']=='83'||_0x64907d['keyCode']=='68'){_0x210132['push'](_0x64907d);}});_0x210132['forEach'](_0x2e4b36=>{if(_0x2e4b36['keyCode']=='65'||_0x2e4b36['keyCode']=='68'){_0x144838=_0x2e4b36;}if(_0x2e4b36['keyCode']=='87'||_0x2e4b36['keyCode']=='83'){_0x27ece7=_0x2e4b36;}});_0x3553a8['xpos']=(_0x144838['xpos']+_0x27ece7['xpos'])/0x2;_0x3553a8['ypos']=(_0x144838['ypos']+_0x27ece7['ypos'])/(0x844de^0x844dc);_0x3553a8['finger-id']=0xa;_0x3553a8['type']='keycordown';this['touches']=this['touches']['filter'](_0x414cf9=>{!_0x210132['includes'](_0x414cf9);});this['touches']['push'](_0x3553a8);var _0x762805={};if(this['touches']['length']>(0xa7905^0xa7904)){_0x762805['code']=CODE_NUMBER['CodeFingersDown'];}else{_0x762805['code']=CODE_NUMBER['CodeFingerDown'];}_0x762805['body']=_0x3553a8;if(this['stream']){this['onSendChannelData_'](_0x762805)['then'](_0x4a2da9=>{});}}['onKeyMoveSend'](_0x5a38aa){let _0x5206af={};_0x5206af['code']=CODE_NUMBER['CodeFingerMove'];var _0x15eb0d={'count':_0x5a38aa['length'],'fingers':[]};if(_0x5a38aa['length']){_0x5a38aa['forEach'](_0xfd2e53=>{let _0x1fd8ae={'xpos':_0xfd2e53['xpos'],'ypos':_0xfd2e53['ypos']};_0x1fd8ae['finger-id']=_0xfd2e53['finger-id'];_0x15eb0d['fingers']['push'](_0x1fd8ae);});}_0x5206af['body']=_0x15eb0d;this['onSendChannelData_'](_0x5206af)['then'](_0xc4b6ce=>{});}['changeResoution'](_0x28bcf9){var _0x5612d4={'body':{'set_resolution':_0x28bcf9}};_0x5612d4['code']=CODE_NUMBER['CodeDefinition'];this['onSendChannelData_'](_0x5612d4)['then'](_0x23152d=>{});}['onBackHome'](_0x2514c6){let _0x1bdc5d={'body':{'key':0x1000090}};_0x1bdc5d['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x1bdc5d))['then'](_0x8c0993=>{});let _0x4b6ad9={'body':{'key':0x1000090}};_0x4b6ad9['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x4b6ad9))['then'](_0xab094=>{});}['onChangeVolume'](_0x17f97b){if(_0x17f97b['name']=='addvolume'){let _0x18f81f={'body':{'key':0x1000072}};_0x18f81f['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x18f81f))['then'](_0x1b35a6=>{this['trace_'](_0x1b35a6);});_0x18f81f['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x18f81f))['then'](_0x11afdf=>{this['trace_'](_0x11afdf);});}if(_0x17f97b['name']=='devolume'){let _0x1138a1={'body':{'key':0x1000070}};_0x1138a1['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x1138a1))['then'](_0x16f22f=>{this['trace_'](_0x16f22f);});_0x1138a1['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x1138a1))['then'](_0x3798c8=>{this['trace_'](_0x3798c8);});}}['onPhoneMenu'](_0x100f6d){let _0x689e6f={'body':{'key':0x1010000}};_0x689e6f['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x689e6f))['then'](_0xebd2f=>{});let _0x69aca0={'body':{'key':0x1010000}};_0x69aca0['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x69aca0))['then'](_0x29bf5a=>{});}['onBackLast'](_0x21b77c){let _0x2886f5={'body':{'key':0x1000061}};_0x2886f5['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x2886f5))['then'](_0xefa1e2=>{this['trace_'](_0xefa1e2);});let _0x968f84={'body':{'key':0x1000061}};_0x968f84['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x968f84))['then'](_0x3bc8f8=>{this['trace_'](_0x3bc8f8);});}['trace_'](_0x4c8daf){if(this['loadingParams_']['debug']){console['log'](_0x4c8daf);}}}export default AppController;